<?xml version="1.0" encoding="UTF-8"?>
<registry>

  <types comment="Type definitions">
    <type name="Status" category="enum" type="u32">
      <value name="Ok" value="0"/>
      <value name="Error" value="1"/>
      <value name="InvalidArgument" value="2"/>
      <value name="OutOfMemory" value="3"/>
      <value name="DeviceLost" value="4"/>
    </type>
    <type name="Result" category="struct">
      <member type="Status" name="status" default="Ok"/>
      <member type="u8string" name="error" mod="ptr" default="nullptr"/>
    </type>
    <type name="AdapterPreference" category="enum" type="i32">
      <value name="None" value="0"/>
      <value name="MinConsumption" value="1"/>
      <value name="Performance" value="2"/>
    </type>
    <type name="AdapterFlags" category="bitmask">
      <value name="None" value="0"/>
      <value name="Remote" bit="0"/>
      <value name="Software" bit="1"/>
      <value name="ACGCompatible" bit="2" impl="dx"/>
      <value name="SupportsMonitoredFences" bit="3" impl="dx"/>
      <value name="SupportsNonMonitoredFences" bit="4" impl="dx"/>
      <value name="KeyedMutexConformance" bit="5" impl="dx"/>
    </type>
    <type name="AdapterDesc" category="struct" >
      <member type="u8string" name="description" array="256"/>
      <member type="u32" name="vendor_id"/>
      <member type="u32" name="device_id"/>
      <member type="u32" name="subsys_id"/>
      <member type="u32" name="revision"/>
      <member type="u64" name="dedicated_video_memory"/>
      <member type="u64" name="dedicated_system_memory"/>
      <member type="u64" name="shared_system_memory"/>
      <member type="u64" name="adapter_id"/>
      <member type="AdapterFlags" name="flags"/>
    </type>
    <type name="Severity" category="enum">
      <value name="Debug" value="0"/>
      <value name="Trace" value="1"/>
      <value name="Info" value="2"/>
      <value name="Warning" value="3"/>
      <value name="Error" value="4"/>
      <value name="Critical" value="5"/>
    </type>
    <type name="DebugCallback" category="delegate">
      <arg type="Severity" name="severity"/>
      <arg type="u8string" name="message" mod="ptr"/>
      <arg type="void" name="user_data" mod="ptr"/>
    </type>
    <type name="QueueType" category="enum" type="u32">
      <value name="Graphics" value="0"/>
      <value name="Bundle" value="1" impl="dx"/>
      <value name="Compute" value="2"/>
      <value name="Copy" value="3"/>
      <value name="VideoDecode" value="4"/>
      <value name="VideoProcess" value="5" impl="dx"/>
      <value name="VideoEncode" value="6" impl="dx"/>
    </type>
  </types>
  <handles>
    <handle name="Factory"/>
    <handle name="Adapter"/>
    <handle name="Device"/>
  </handles>
  <functions>
    <func name="CreateFactory">
      <ret type="Result" name="result"/>
      <ret type="Factory" name="factory"/>
      <arg type="bool" name="debug_layer" default="false"/>
      <arg type="DebugCallback" name="callback" default="nullptr"/>
      <arg type="void" name="user_data" mod="ptr"/>
    </func>
    <func for="Factory" name="GetAdapter">
      <ret type="Result" name="result"/>
      <ret type="Adapter" name="adapter"/>
      <arg type="u32" name="index"/>
      <arg type="AdapterPreference" name="preference" default="Performance"/>
    </func>
    <func for="Factory" name="Destroy"/>
    <func for="Adapter" name="GetDesc">
      <ret type="Result" name="result"/>
      <arg type="AdapterDesc" mod="ptr" name="desc"/>
    </func>
    <func name="CreateDevice">
      <ret type="Result" name="result"/>
      <ret type="Device" name="device"/>
      <arg type="Factory" name="factory"/>
      <arg type="Adapter" name="adapter"/>
    </func>
  </functions>
</registry>
